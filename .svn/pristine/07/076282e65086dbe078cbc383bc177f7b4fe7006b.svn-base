webpackJsonp([7],{c3qG:function(e,t){},ntlW:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=o("BO1k"),r=o.n(l),a=o("mvHQ"),s=o.n(a),i=o("OpVI"),n={data:function(){return{keyinput:"",tableData:[],ruleForm:{usercode:"",username:"",adjust:"",download:"",rolecode:[]},tempruleForm:{usercode:"",username:"",adjust:!1,download:!1,rolecode:[]},rules:{usercode:[{required:!0,message:"请输入用户编码",trigger:"blur"},{message:"请输入字母下划线数字的组合",trigger:"blur,change",pattern:/^[0-9a-zA-Z_]{1,}$/}],username:[{required:!0,message:"请输入用户名称",trigger:"blur"}]},dialogFormVisible:!1,options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"}],value:"",offset:0,pageSize:10,selectdata:[],total:0,addoredit:!0}},mounted:function(){this.Getdata(),this.Getrole()},methods:{change:function(){console.log("this.ruleForm-res",this.ruleForm.rolecode)},Getrole:function(){var e=this;Object(i.q)().then(function(t){console.log("获取角色下拉-res",t),"0"===t.code&&(e.options=t.data)})},Getdata:function(){var e=this,t={keyword:this.keyinput,offset:this.offset,pageSize:this.pageSize};Object(i.w)(t).then(function(t){console.log("res-role",t),"0"===t.code&&(e.tableData=t.data.rows,e.total=t.data.total)})},handleSelectionChange:function(e){this.selectdata=JSON.parse(s()(e))},delopen:function(){var e=this,t=[],o=!0,l=!1,a=void 0;try{for(var s,n=r()(this.selectdata);!(o=(s=n.next()).done);o=!0){var u=s.value;t.push(u.id)}}catch(e){l=!0,a=e}finally{try{!o&&n.return&&n.return()}finally{if(l)throw a}}Object(i.i)(t).then(function(t){"0"===t.code&&e.Getdata()})},currentpagechange:function(e){this.offset=e,this.Getdata()},Adddata:function(){var e=this,t={usercode:this.ruleForm.usercode,username:this.ruleForm.username,adjust:this.ruleForm.adjust,download:this.ruleForm.download,rolecode:this.ruleForm.rolecode.join(",")};console.log("this.ruleForm.adjust",this.ruleForm.adjust),console.log("val",t),Object(i.c)(t).then(function(t){console.log("res-adduser",t),"0"===t.code&&e.Getdata()})},Editdata:function(){var e=this,t=JSON.parse(s()(this.ruleForm));t.rolecode=t.rolecode.join(","),Object(i.k)(t).then(function(t){"0"===t.code&&e.Getdata()})},addopen:function(){this.dialogFormVisible=!0,this.addoredit=!0,this.ruleForm=JSON.parse(s()(this.tempruleForm))},edit:function(e){for(var t in this.addoredit=!1,this.dialogFormVisible=!0,this.ruleForm=JSON.parse(s()(this.tempruleForm)),e)"true"===e[t]?this.ruleForm[t]=!0:"false"===e[t]?this.ruleForm[t]=!1:this.ruleForm[t]=e[t];""===this.ruleForm.rolecode||void 0===this.ruleForm.rolecode||0===this.ruleForm.rolecode.length?this.ruleForm.rolecode=[]:this.ruleForm.rolecode=this.ruleForm.rolecode.split(",")},querydata:function(){this.Getdata()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.dialogFormVisible=!1,t.addoredit?t.Adddata():t.Editdata()})},resetForm:function(e){this.dialogFormVisible=!1}}},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"usersmanagerbox"},[o("div",{staticClass:"querybox"},[e._m(0),e._v(" "),o("div",{staticClass:"inputbox"},[o("el-input",{attrs:{placeholder:"请输入关键字查询"},model:{value:e.keyinput,callback:function(t){e.keyinput=t},expression:"keyinput"}}),e._v(" "),o("el-button",{staticClass:"querybtn",on:{click:e.querydata}},[e._v("查询")])],1)]),e._v(" "),o("div",{staticClass:"tablebox"},[o("div",{staticClass:"pagetitle"},[o("span",{staticClass:"titletext"},[e._v("查看/编辑用户信息")]),e._v(" "),o("div",{staticClass:"btngroup"},[o("el-button",{on:{click:e.addopen}},[e._v("新增")]),e._v(" "),o("el-button",{on:{click:e.delopen}},[e._v(" 删除")])],1)]),e._v(" "),o("div",{staticClass:"eletable"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{prop:"usercode",label:"用户编码",type:"text",size:"small","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"username",label:"用户名称",type:"text",size:"small","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"adjust",label:"调整",width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"download",label:"下载",width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"rolecode",label:"角色","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.edit(t.row)}}},[e._v("修改")])]}}])})],1),e._v(" "),o("div",{staticClass:"paginationbox"},[o("el-pagination",{attrs:{total:e.total,"current-page":e.offset,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper"},on:{"current-change":e.currentpagechange}})],1)],1)]),e._v(" "),o("el-dialog",{attrs:{title:"新增",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"用户编码",prop:"usercode"}},[o("el-input",{model:{value:e.ruleForm.usercode,callback:function(t){e.$set(e.ruleForm,"usercode",t)},expression:"ruleForm.usercode"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"用户名称",prop:"username"}},[o("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"调整权限"}},[o("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949"},model:{value:e.ruleForm.adjust,callback:function(t){e.$set(e.ruleForm,"adjust",t)},expression:"ruleForm.adjust"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"下载权限"}},[o("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949"},model:{value:e.ruleForm.download,callback:function(t){e.$set(e.ruleForm,"download",t)},expression:"ruleForm.download"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"角色编码"}},[o("el-select",{attrs:{placeholder:"请选择",multiple:""},on:{change:e.change},model:{value:e.ruleForm.rolecode,callback:function(t){e.$set(e.ruleForm,"rolecode",t)},expression:"ruleForm.rolecode"}},e._l(e.options,function(e,t){return o("el-option",{key:t,attrs:{label:e.value,value:e.key}})}))],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("取 消")]),e._v(" "),o("el-button",{on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pagetitle"},[t("span",{staticClass:"titletext"},[this._v("查询条件")])])}]};var c=o("VU/8")(n,u,!1,function(e){o("c3qG")},null,null);t.default=c.exports}});
//# sourceMappingURL=7.80c80d26e88c96e0cac3.js.map